<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RetroBoard - Scrum –†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤—ã</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
  <div id="home-page" class="page">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a class="navbar-brand fw-bold" href="#">
          <span class="material-icons me-2">retrospective</span>
          RetroBoard
        </a>
      </div>
    </nav>
    
    <div class="container mt-5">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card shadow-lg border-0">
            <div class="card-body p-5">
              <h1 class="text-center mb-4">üéØ Scrum –†–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞</h1>
              <p class="text-center text-muted mb-4">
                –ü—Ä–æ–≤–æ–¥–∏—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤—ã —Å –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥–æ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
              </p>
              
              <ul class="nav nav-tabs mb-4" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#create-tab" id="create-tab-btn">
                    <span class="material-icons me-1">add_circle</span>
                    –°–æ–∑–¥–∞—Ç—å
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#join-tab">
                    <span class="material-icons me-1">login</span>
                    –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#history-tab" onclick="loadHistory()">
                    <span class="material-icons me-1">history</span>
                    –ò—Å—Ç–æ—Ä–∏—è
                  </button>
                </li>
              </ul>
              
              <div class="tab-content">
                <!-- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏ -->
                <div class="tab-pane fade show active" id="create-tab">
                  <div id="create-tab-locked">
                    <div class="text-center py-4">
                      <span class="material-icons display-1 text-muted">lock</span>
                      <h5 class="mt-3">–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</h5>
                      <p class="text-muted">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞</p>
                      <button class="btn btn-primary mt-2" onclick="showPasswordModal()">
                        <span class="material-icons me-1">lock_open</span>
                        –í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å
                      </button>
                      <div id="active-session-notice" class="mt-3" style="display:none;">
                        <div class="alert alert-info mb-0">
                          <span class="material-icons me-2 align-middle">info</span>
                          –£ –≤–∞—Å –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è
                          <button class="btn btn-sm btn-primary ms-2" onclick="returnToSession()">
                            <span class="material-icons" style="font-size: 16px;">login</span>
                            –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ —Å–µ—Å—Å–∏—é
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="create-tab-unlocked" style="display:none;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                      <h5 class="mb-0">üîì –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏</h5>
                      <div>
                        <button class="btn btn-outline-primary btn-sm me-2" id="return-session-btn" onclick="returnToSession()" style="display:none;">
                          <span class="material-icons" style="font-size: 16px;">login</span>
                          –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ —Å–µ—Å—Å–∏—é
                        </button>
                        <button class="btn btn-outline-secondary btn-sm" onclick="lockCreateTab()">
                          <span class="material-icons" style="font-size: 16px;">lock</span>
                          –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                      </div>
                    </div>
                    <form id="create-session-form">
                    <div class="mb-3">
                      <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤—ã</label>
                      <input type="text" class="form-control" id="session-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–ø—Ä–∏–Ω—Ç 24" required>
                    </div>
                    
                    <div class="mb-3">
                      <label class="form-label">–í–∞—à–µ –∏–º—è (–≤–µ–¥—É—â–∏–π)</label>
                      <input type="text" class="form-control" id="admin-name" placeholder="–ò–º—è –≤–µ–¥—É—â–µ–≥–æ" required>
                    </div>
                    
                    <div class="mb-3">
                      <label class="form-label">–®–∞–±–ª–æ–Ω</label>
                      <select class="form-select" id="session-template">
                        <option value="classic">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π (Start, Stop, Continue)</option>
                        <option value="mad-sad-glad">Mad, Sad, Glad</option>
                        <option value="good-bad-ideas">Good, Bad, Ideas</option>
                        <option value="kiss">KISS (Keep, Improve, Start, Stop)</option>
                        <option value="sailboat">Sailboat (–ü–∞—Ä—É—Å–Ω–∏–∫)</option>
                        <option value="freeform">–°–≤–æ–±–æ–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç</option>
                      </select>
                    </div>
                    
                    <button type="submit" class="btn btn-primary w-100 py-2">
                      <span class="material-icons me-1 align-middle">rocket_launch</span>
                      –°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é
                    </button>
                  </form>
                  </div>
                </div>
                
                <!-- –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —Å–µ—Å—Å–∏–∏ -->
                <div class="tab-pane fade" id="join-tab">
                  <form id="join-session-form">
                    <div class="mb-3" id="join-session-id-container">
                      <label class="form-label">ID —Å–µ—Å—Å–∏–∏</label>
                      <input type="text" class="form-control" id="join-session-id" placeholder="–í–≤–µ–¥–∏—Ç–µ ID —Å–µ—Å—Å–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Å—ã–ª–∫—É" required>
                      <small class="text-muted">–ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ: yoursite.com/?session=ID</small>
                    </div>

                    <div class="mb-3">
                      <label class="form-label">–í–∞—à–µ –∏–º—è</label>
                      <input type="text" class="form-control" id="join-name" placeholder="–ö–∞–∫ –≤–∞—Å –Ω–∞–∑—ã–≤–∞—Ç—å" required>
                    </div>

                    <button type="submit" class="btn btn-success w-100 py-2">
                      <span class="material-icons me-1 align-middle">login</span>
                      <span id="join-btn-text">–í–æ–π—Ç–∏ –≤ —Å–µ—Å—Å–∏—é</span>
                    </button>
                  </form>
                </div>
                
                <!-- –ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π -->
                <div class="tab-pane fade" id="history-tab">
                  <div id="history-list" class="list-group">
                    <div class="text-center text-muted py-4">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è -->
  <div class="modal fade" id="passwordModal" tabindex="-1">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <span class="material-icons me-2">lock</span>
            –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input type="password" id="create-tab-password" class="form-control" placeholder="–ü–∞—Ä–æ–ª—å" autofocus>
          <small class="text-muted mt-2 d-block">–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Å–µ—Å—Å–∏–π</small>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
          <button type="button" class="btn btn-primary" onclick="checkPassword()">
            <span class="material-icons me-1" style="font-size: 16px;">lock_open</span>
            –û—Ç–∫—Ä—ã—Ç—å
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–µ—Å—Å–∏–∏ -->
  <div class="modal fade" id="viewSessionModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Å—Å–∏–∏</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="row mb-3">
            <div class="col-md-6">
              <h6>–ò—Ç–æ–≥–∏ —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤—ã</h6>
              <div id="session-summary-view" class="p-3 bg-light rounded">
                <p class="text-muted mb-0">–ù–µ—Ç –∏—Ç–æ–≥–æ–≤</p>
              </div>
            </div>
            <div class="col-md-6">
              <h6>–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π</h6>
              <div id="session-actions-view" class="p-3 bg-light rounded">
                <p class="text-muted mb-0">–ù–µ—Ç –ø–ª–∞–Ω–∞ –¥–µ–π—Å—Ç–≤–∏–π</p>
              </div>
            </div>
          </div>

          <h6 class="mt-4">–í—Å–µ –∏–¥–µ–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è</h6>
          <div id="session-items-view" class="mt-3">
            <div class="text-center text-muted py-4">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger me-auto" id="delete-session-btn" onclick="deleteCurrentSession()">–£–¥–∞–ª–∏—Ç—å —Å–µ—Å—Å–∏—é</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–µ—Å—Å–∏–∏ -->
  <div id="session-page" class="page d-none">
    <nav class="navbar navbar-dark bg-primary">
      <div class="container-fluid">
        <div class="d-flex align-items-center">
          <button class="btn btn-link text-white me-2" onclick="goHome()">
            <span class="material-icons">arrow_back</span>
          </button>
          <div>
            <h5 class="mb-0" id="session-title">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏</h5>
            <small class="text-white-50" id="session-info">–®–∞–±–ª–æ–Ω ‚Ä¢ –°—Ç–∞—Ç—É—Å</small>
            <!-- –í–∫–ª–∞–¥–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É Brain storm –∏ –û–±—Å—É–∂–¥–µ–Ω–∏–µ -->
            <ul class="nav nav-tabs mt-2" id="session-tabs" style="display:none;">
              <li class="nav-item">
                <button class="nav-link active py-1 px-2" id="brainstorm-tab-btn" onclick="switchToTab('brainstorm')">
                  üß† Brain storm
                </button>
              </li>
              <li class="nav-item">
                <button class="nav-link py-1 px-2" id="discussion-tab-btn" onclick="switchToTab('discussion')">
                  üí¨ –û–±—Å—É–∂–¥–µ–Ω–∏–µ <span class="badge bg-primary ms-1" id="discussion-count-badge">0</span>
                </button>
              </li>
            </ul>
          </div>
        </div>
        
        <div class="d-flex align-items-center gap-3">
          <!-- –°–º–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è -->
          <div class="mood-selector" id="mood-selector-container">
            <div class="mood-item">
              <span class="mood-btn" data-mood="happy" title="–†–∞–¥–æ—Å—Ç–Ω—ã–π">üòÑ</span>
              <span class="mood-count" id="mood-count-happy">0</span>
            </div>
            <div class="mood-item">
              <span class="mood-btn" data-mood="smile" title="–£–ª—ã–±–∞—é—â–∏–π—Å—è">üòä</span>
              <span class="mood-count" id="mood-count-smile">0</span>
            </div>
            <div class="mood-item">
              <span class="mood-btn" data-mood="neutral" title="–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π">üòê</span>
              <span class="mood-count" id="mood-count-neutral">0</span>
            </div>
            <div class="mood-item">
              <span class="mood-btn" data-mood="tired" title="–£—Å—Ç–∞–ª—ã–π">üò´</span>
              <span class="mood-count" id="mood-count-tired">0</span>
            </div>
            <div class="mood-item">
              <span class="mood-btn" data-mood="dead" title="–ü–æ—á—Ç–∏ —É–º–µ—Ä">üíÄ</span>
              <span class="mood-count" id="mood-count-dead">0</span>
            </div>
          </div>
          
          <div id="timer-container"></div>
          
          <div class="text-white" style="background: rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 8px;">
            <small>ID: </small><strong id="session-id-display">-</strong>
            <button class="btn btn-sm btn-link text-white ms-1" onclick="copySessionId()" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID">
              <span class="material-icons" style="font-size: 16px;">content_copy</span>
            </button>
          </div>
          
          <div class="text-white" style="background: rgba(255,255,255,0.2); padding: 6px 12px; border-radius: 8px;" id="admin-votes-control" title="–õ–∏–º–∏—Ç –≥–æ–ª–æ—Å–æ–≤" style="display:none;">
            <small>–ì–æ–ª–æ—Å–æ–≤: </small>
            <input type="number" id="vote-limit-input" class="form-control form-control-sm d-inline-block"
                   style="width: 60px; display: inline-block; padding: 2px 6px; font-size: 0.875rem;"
                   value="5" min="1" max="100" onchange="updateVoteLimit(this.value)" title="–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç –≥–æ–ª–æ—Å–æ–≤">
          </div>
          <div class="text-white-50" id="vote-limit-display" style="display:none;">
            <small>–ì–æ–ª–æ—Å–æ–≤: <strong id="vote-limit-value">5</strong></small>
          </div>
          
          <!-- –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è –∞–¥–º–∏–Ω–∞ -->
          <div class="text-white d-flex gap-3 align-items-center" id="admin-view-controls" style="display:none; background: rgba(255,255,255,0.15); padding: 6px 12px; border-radius: 8px;">
            <label class="form-check-label form-check-label-sm" title="–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∫–∞—Ä—Ç–æ—á–∫–∏">
              <input type="checkbox" id="hide-others-cards" class="form-check-input" onchange="toggleHideOthersCards(this.checked)">
              üö´üìã
            </label>
            <label class="form-check-label form-check-label-sm" title="–°–∫—Ä—ã–≤–∞—Ç—å –≥–æ–ª–æ—Å–∞ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤">
              <input type="checkbox" id="hide-others-votes" class="form-check-input" onchange="toggleHideOthersVotes(this.checked)">
              üîá
            </label>
            <button class="btn btn-sm btn-light" id="vote-mode-btn" onclick="toggleVoteMode()" title="–†–µ–∂–∏–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è">
              <span class="material-icons" style="font-size: 16px; vertical-align: middle;">thumb_up</span>
              –ì–æ–ª–æ—Å–æ–≤–∞—Ç—å
            </button>
          </div>
          
          <span class="text-white" id="user-display"></span>
          <button class="btn btn-outline-light btn-sm" id="admin-panel-btn" onclick="toggleAdminPanel()" style="display:none;">
            <span class="material-icons">admin_panel_settings</span>
            –ê–¥–º–∏–Ω
          </button>
          <button class="btn btn-outline-light btn-sm" id="end-session-btn" onclick="endSession()" style="display:none;">
            <span class="material-icons">check_circle</span>
            –ó–∞–≤–µ—Ä—à–∏—Ç—å
          </button>
        </div>
      </div>
    </nav>

    <div class="container-fluid mt-3">
      <div class="row">
        <!-- –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
        <div class="col-12 mb-3">
          <div class="card shadow-sm">
            <div class="card-body py-2">
              <h6 class="card-title mb-2">
                <span class="material-icons" style="font-size: 18px; vertical-align: middle;">group</span>
                –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Å–µ—Å—Å–∏–∏
              </h6>
              <div class="participants-list" id="participants-list">
                <span class="text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- –ö–æ–ª–æ–Ω–∫–∏ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
        <div class="col" id="columns-container">
          <!-- –ö–æ–ª–æ–Ω–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ "–û–±—Å—É–∂–¥–µ–Ω–∏–µ" -->
        <div class="col" id="discussion-container" style="display:none;">
          <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
              <span class="material-icons align-middle">forum</span>
              –û–±—Å—É–∂–¥–µ–Ω–∏–µ
            </div>
            <div class="card-body" id="discussion-items-container">
              <p class="text-muted text-center">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤–æ –≤–∫–ª–∞–¥–∫–µ "Brain storm" –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è</p>
            </div>
            <!-- –†—É—á–∫–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ -->
            <div class="discussion-resize-handle" id="discussion-resize-handle" title="–ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä"></div>
          </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
        <div class="col-md-3" id="admin-panel" style="display:none;">
          <div class="card shadow-sm">
            <div class="card-header bg-warning text-dark">
              <span class="material-icons align-middle">admin_panel_settings</span>
              –ü–∞–Ω–µ–ª—å –≤–µ–¥—É—â–µ–≥–æ
            </div>
            <div class="card-body">
              <h6 class="card-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–º</h6>
              <select class="form-select mb-3" id="admin-template-select" onchange="changeTemplate()">
                <option value="classic">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π</option>
                <option value="mad-sad-glad">Mad, Sad, Glad</option>
                <option value="good-bad-ideas">Good, Bad, Ideas</option>
                <option value="kiss">KISS</option>
                <option value="sailboat">–ü–∞—Ä—É—Å–Ω–∏–∫</option>
                <option value="freeform">–°–≤–æ–±–æ–¥–Ω—ã–π</option>
              </select>
              
              <h6 class="card-title">–≠–∫—Å–ø–æ—Ä—Ç</h6>
              <button class="btn btn-outline-primary btn-sm w-100 mb-2" onclick="exportResults('json')">
                <span class="material-icons align-middle">download</span>
                JSON
              </button>
              <button class="btn btn-outline-primary btn-sm w-100 mb-2" onclick="exportResults('pdf')">
                <span class="material-icons align-middle">picture_as_pdf</span>
                PDF
              </button>
              <button class="btn btn-outline-primary btn-sm w-100" onclick="exportResults('confluence')">
                <span class="material-icons align-middle">description</span>
                Confluence
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–¥–µ–∏ -->
  <div class="modal fade" id="addItemModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">–î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="add-item-form" onsubmit="event.preventDefault(); submitItem();">
            <input type="hidden" id="item-category">
            
            <ul class="nav nav-tabs mb-3" role="tablist">
              <li class="nav-item">
                <button class="nav-link active" type="button" data-bs-toggle="tab" data-bs-target="#tab-text">
                  <span class="material-icons">text_fields</span>
                  –¢–µ–∫—Å—Ç
                </button>
              </li>
              <li class="nav-item">
                <button class="nav-link" type="button" data-bs-toggle="tab" data-bs-target="#tab-meme">
                  <span class="material-icons">image</span>
                  –ú–µ–º
                </button>
              </li>
              <li class="nav-item">
                <button class="nav-link" type="button" data-bs-toggle="tab" data-bs-target="#tab-emoji">
                  <span class="material-icons">sentiment_satisfied</span>
                  –°–º–∞–π–ª—ã
                </button>
              </li>
            </ul>
            
            <div class="tab-content">
              <div class="tab-pane fade show active" id="tab-text">
                <div class="form-control" id="item-text" contenteditable="true" placeholder="–í–∞—à–∞ –∏–¥–µ—è..." style="min-height: 100px; overflow-y: auto;"></div>

                <!-- –ë—ã—Å—Ç—Ä–∞—è –≤—Å—Ç–∞–≤–∫–∞ —Å–º–∞–π–ª–æ–≤ -->
                <label class="form-label mt-2">–í—Å—Ç–∞–≤–∏—Ç—å —Å–º–∞–π–ª:</label>
                <div class="emoji-picker-inline">
                  <span class="emoji-btn" onclick="insertEmoji('üëç', event)">üëç</span>
                  <span class="emoji-btn" onclick="insertEmoji('üëé', event)">üëé</span>
                  <span class="emoji-btn" onclick="insertEmoji('‚úÖ', event)">‚úÖ</span>
                  <span class="emoji-btn" onclick="insertEmoji('‚ùå', event)">‚ùå</span>
                  <span class="emoji-btn" onclick="insertEmoji('üéâ', event)">üéâ</span>
                  <span class="emoji-btn" onclick="insertEmoji('üî•', event)">üî•</span>
                  <span class="emoji-btn" onclick="insertEmoji('üí°', event)">üí°</span>
                  <span class="emoji-btn" onclick="insertEmoji('‚≠ê', event)">‚≠ê</span>
                  <span class="emoji-btn" onclick="insertEmoji('üöÄ', event)">üöÄ</span>
                  <span class="emoji-btn" onclick="insertEmoji('üòÑ', event)">üòÑ</span>
                  <span class="emoji-btn" onclick="insertEmoji('üò¢', event)">üò¢</span>
                  <span class="emoji-btn" onclick="insertEmoji('üò°', event)">üò°</span>
                  <span class="emoji-btn" onclick="insertEmoji('ü§î', event)">ü§î</span>
                  <span class="emoji-btn" onclick="insertEmoji('üéØ', event)">üéØ</span>
                  <span class="emoji-btn" onclick="insertEmoji('üí™', event)">üí™</span>
                  <span class="emoji-btn" onclick="insertEmoji('‚ù§Ô∏è', event)">‚ù§Ô∏è</span>
                  <span class="emoji-btn" onclick="insertEmoji('üòç', event)">üòç</span>
                  <span class="emoji-btn" onclick="insertEmoji('ü§£', event)">ü§£</span>
                  <span class="emoji-btn" onclick="insertEmoji('üòÆ', event)">üòÆ</span>
                  <span class="emoji-btn" onclick="insertEmoji('üò±', event)">üò±</span>
                  <span class="emoji-btn" onclick="insertEmoji('üôÑ', event)">üôÑ</span>
                  <span class="emoji-btn" onclick="insertEmoji('üí©', event)">üí©</span>
                  <span class="emoji-btn" onclick="insertEmoji('üôè', event)">üôè</span>
                  <span class="emoji-btn" onclick="insertEmoji('üìà', event)">üìà</span>
                </div>

                <!-- –ë—ã—Å—Ç—Ä–∞—è –≤—Å—Ç–∞–≤–∫–∞ –º–µ–º–æ–≤ -->
                <label class="form-label mt-3">–í—Å—Ç–∞–≤–∏—Ç—å –º–µ–º:</label>
                <div class="meme-preview-container" id="text-tab-memes-container">
                  <img src="https://lh5.googleusercontent.com/avS6QMu-9IxfATwVoY96o2GHhDWX1Y_VmSV1YU7XgZ-RyOWaRXNoVvdy4mL65ngnY93chePJ5fGciB33wevXxfhnwhtvveg9TxYL54Vs7NTAOoOiBT1v69kZgMjjEvnXusZjqKCh" class="meme-preview" onclick="insertMeme('https://lh5.googleusercontent.com/avS6QMu-9IxfATwVoY96o2GHhDWX1Y_VmSV1YU7XgZ-RyOWaRXNoVvdy4mL65ngnY93chePJ5fGciB33wevXxfhnwhtvveg9TxYL54Vs7NTAOoOiBT1v69kZgMjjEvnXusZjqKCh', 'Meme')" title="Meme">
                </div>
                <button type="button" class="btn btn-primary btn-sm mt-2" onclick="openAddMemeModal()">
                  <span class="material-icons" style="font-size: 16px; vertical-align: middle;">add</span>
                  –î–æ–±–∞–≤–∏—Ç—å –º–µ–º
                </button>
              </div>

              <div class="tab-pane fade" id="tab-meme">
                <div class="mb-3">
                  <label class="form-label">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                  <input type="text" class="form-control" id="item-meme-url" placeholder="https://...">
                </div>
                <div class="text-center">
                  <label class="form-label d-block mb-2">–ë—ã—Å—Ç—Ä—ã–µ –º–µ–º—ã:</label>
                  <div class="btn-group flex-wrap gap-1 mb-2" id="quick-memes-container">
                    <button type="button" class="btn btn-outline-secondary btn-sm" onclick="selectMeme('https://lh5.googleusercontent.com/avS6QMu-9IxfATwVoY96o2GHhDWX1Y_VmSV1YU7XgZ-RyOWaRXNoVvdy4mL65ngnY93chePJ5fGciB33wevXxfhnwhtvveg9TxYL54Vs7NTAOoOiBT1v69kZgMjjEvnXusZjqKCh')">Meme</button>
                  </div>
                  <button type="button" class="btn btn-primary btn-sm" onclick="openAddMemeModal()">
                    <span class="material-icons" style="font-size: 16px; vertical-align: middle;">add</span>
                    –î–æ–±–∞–≤–∏—Ç—å –º–µ–º
                  </button>
                </div>
              </div>

              <div class="tab-pane fade" id="tab-emoji">
                <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å–º–∞–π–ª:</label>
                <div class="emoji-grid">
                  <span class="emoji-btn" onclick="selectEmoji('üëç')">üëç</span>
                  <span class="emoji-btn" onclick="selectEmoji('üëé')">üëé</span>
                  <span class="emoji-btn" onclick="selectEmoji('‚úÖ')">‚úÖ</span>
                  <span class="emoji-btn" onclick="selectEmoji('‚ùå')">‚ùå</span>
                  <span class="emoji-btn" onclick="selectEmoji('üéâ')">üéâ</span>
                  <span class="emoji-btn" onclick="selectEmoji('üî•')">üî•</span>
                  <span class="emoji-btn" onclick="selectEmoji('üí°')">üí°</span>
                  <span class="emoji-btn" onclick="selectEmoji('‚≠ê')">‚≠ê</span>
                  <span class="emoji-btn" onclick="selectEmoji('üöÄ')">üöÄ</span>
                  <span class="emoji-btn" onclick="selectEmoji('üòÑ')">üòÑ</span>
                  <span class="emoji-btn" onclick="selectEmoji('üò¢')">üò¢</span>
                  <span class="emoji-btn" onclick="selectEmoji('üò°')">üò°</span>
                  <span class="emoji-btn" onclick="selectEmoji('ü§î')">ü§î</span>
                  <span class="emoji-btn" onclick="selectEmoji('üéØ')">üéØ</span>
                  <span class="emoji-btn" onclick="selectEmoji('üí™')">üí™</span>
                  <span class="emoji-btn" onclick="selectEmoji('‚ù§Ô∏è')">‚ù§Ô∏è</span>
                  <span class="emoji-btn" onclick="selectEmoji('üòç')">üòç</span>
                  <span class="emoji-btn" onclick="selectEmoji('ü§£')">ü§£</span>
                  <span class="emoji-btn" onclick="selectEmoji('üòÆ')">üòÆ</span>
                  <span class="emoji-btn" onclick="selectEmoji('üò±')">üò±</span>
                  <span class="emoji-btn" onclick="selectEmoji('üôÑ')">üôÑ</span>
                  <span class="emoji-btn" onclick="selectEmoji('üòè')">üòè</span>
                  <span class="emoji-btn" onclick="selectEmoji('üò¥')">üò¥</span>
                  <span class="emoji-btn" onclick="selectEmoji('ü§Æ')">ü§Æ</span>
                  <span class="emoji-btn" onclick="selectEmoji('ü§Ø')">ü§Ø</span>
                  <span class="emoji-btn" onclick="selectEmoji('üëÄ')">üëÄ</span>
                  <span class="emoji-btn" onclick="selectEmoji('üí©')">üí©</span>
                  <span class="emoji-btn" onclick="selectEmoji('üôè')">üôè</span>
                  <span class="emoji-btn" onclick="selectEmoji('ü§ù')">ü§ù</span>
                  <span class="emoji-btn" onclick="selectEmoji('üéä')">üéä</span>
                  <span class="emoji-btn" onclick="selectEmoji('üìà')">üìà</span>
                  <span class="emoji-btn" onclick="selectEmoji('üìâ')">üìâ</span>
                  <span class="emoji-btn" onclick="selectEmoji('‚ö†Ô∏è')">‚ö†Ô∏è</span>
                  <span class="emoji-btn" onclick="selectEmoji('‚ùì')">‚ùì</span>
                </div>
                <input type="hidden" id="item-emoji">
                <div id="emoji-preview" class="text-center mt-2" style="display:none;">
                  <strong>–í—ã–±—Ä–∞–Ω–æ: </strong><span id="emoji-preview-text" style="font-size: 2rem;"></span>
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
          <button type="button" class="btn btn-primary" onclick="submitItem()">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è -->
  <div class="modal fade" id="endSessionModal" tabindex="-1">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤—ã</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p>–¢–æ—á–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤—É?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–ù–µ—Ç</button>
          <button type="button" class="btn btn-success" onclick="confirmEndSession()">–î–∞</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ–º–∞ -->
  <div class="modal fade" id="addMemeModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">–î–æ–±–∞–≤–∏—Ç—å –º–µ–º –≤ —Å–ø–∏—Å–æ–∫</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ–º–∞</label>
            <input type="text" class="form-control" id="meme-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: This is Fine">
          </div>
          <div class="mb-3">
            <label class="form-label">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
            <input type="text" class="form-control" id="meme-url" placeholder="https://...">
          </div>
          <div class="mb-3">
            <label class="form-label">–°–ø–∏—Å–æ–∫ –º–µ–º–æ–≤ (–¥–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è)</label>
            <div id="custom-memes-list" class="d-flex flex-wrap gap-1">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
          <button type="button" class="btn btn-primary" onclick="addCustomMeme()">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –º–µ–º–∞ -->
  <div class="modal fade" id="deleteMemeConfirmModal" tabindex="-1">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">–£–¥–∞–ª–∏—Ç—å –º–µ–º?</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
          <button type="button" class="btn btn-danger" id="confirm-delete-meme-btn">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–∞–∑—ä–µ–¥–∏–Ω–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ -->
  <div class="modal fade" id="splitItemModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">–†–∞–∑—ä–µ–¥–∏–Ω–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p class="text-muted mb-3">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Å—Ç–∏ –¥–ª—è –æ—Ç–¥–µ–ª–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏:</p>
          <div id="split-parts-list">
            <!-- –°–ø–∏—Å–æ–∫ —á–∞—Å—Ç–µ–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
          </div>
          <div class="form-text">
            <span class="material-icons" style="font-size: 14px; vertical-align: middle;">info</span>
            –ù–µ–≤—ã–±—Ä–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –∫–∞—Ä—Ç–æ—á–∫–µ
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
          <button type="button" class="btn btn-primary" onclick="confirmSplitItem()">–†–∞–∑—ä–µ–¥–∏–Ω–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="app.js"></script>
</body>
</html>
